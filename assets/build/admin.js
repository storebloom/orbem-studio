(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".repeater-container");function t(e,t){const o=t.querySelectorAll(".field-container");e.addEventListener("click",(()=>{const n=e.closest(".field-container");if(n.remove(),n){const e=t.querySelectorAll(".field-container");o&&e.forEach(((e,t)=>{const o=e.querySelectorAll("input"),n=e.querySelector(".container-index"),r=n.textContent;n&&(n.textContent=t),o.forEach((e=>{const o=e.id.replace(r,t);e.setAttribute("data-index",t),e.id=o,e.setAttribute("name",o)}))}))}}))}e&&e.forEach((e=>{const o=e.querySelector(".field-container-wrap"),n=e.querySelector(".add-field"),r=o.querySelectorAll(".remove-field");r&&r.forEach((o=>{t(o,e)})),n&&n.addEventListener("click",(()=>{const n=e.querySelectorAll(".field-container"),r=n[0].cloneNode(!0),l=r.querySelectorAll("[name]"),c=n.length;l&&l.forEach((e=>{e.name=e.name.replaceAll("0",c),e.id=e.id.replaceAll("0",c)})),r.querySelector(".container-index").textContent=c,o.appendChild(r);const i=r.querySelector(".remove-field"),a=r.querySelector(".upload_image_button"),d=r.querySelector(".remove_image_button");a&&d&&(window.initExploreUploadButton(a),window.initExploreRemoveButton(d)),t(i,e)}))}));const o=document.querySelectorAll(".explore-color-field");o&&o.forEach((e=>{jQuery(e).iris({defaultColor:e.dataset.defaultColor,change:function(t,o){e.value=o.color.toString()}});const t=e.parentNode.querySelector(".iris-picker");t.style.display="none",e.addEventListener("focus",(()=>{t.style.display="block"})),document.addEventListener("click",(o=>{e.contains(o.target)||t.contains(o.target)||(t.style.display="none")}))}))}))})();