(()=>{"use strict";let e,t,a,n,o,s,r,c,i=[],l=[],d="",u=!1,m=!1,p=0,g=!1,y=!1,w=!1,h=!1,f=!1,v="",S=!1;function L(){const e=document.getElementById("characters"),t=e.querySelectorAll(".character-list .character-item");t&&t.forEach((t=>{t.addEventListener("click",(()=>{!function(e){const t=e.querySelector("img");t.removeAttribute("srcset");const a=document.querySelector("#map-character");if(t&&a){const t=void 0===a.dataset.currentchar?"mc":a.dataset.currentchar,n=document.querySelectorAll("#map-character .map-character-icon"),o=e.querySelectorAll(".character-images .character-icon");if(n&&n.forEach(((t,n)=>{const s=t.src,r=a.dataset.ability;t.src=o[n].src,o[n].src=s,a.setAttribute("data-currentchar",e.dataset.charactername),a.setAttribute("data-ability",e.dataset.ability),e.dataset.ability=r})),!0===e.dataset.charactername.includes("ioana"))clearInterval(window.movementInt),window.moveSpeed=10,window.attackMultiplier=5,se(),O(document.querySelector('.storage-item[title="fist"]'));else if(!0===e.dataset.charactername.includes("mc"))O(document.querySelector('.storage-item[data-type="weapons"].equipped')),clearInterval(window.movementInt),window.moveSpeed=20,window.attackMultiplier=0,se();else if(!0===e.dataset.charactername.includes("john")){clearInterval(window.movementInt),window.moveSpeed=20,se();const e=document.querySelector('.storage-item[title="fist"]');window.attackMultiplier=10,O(e)}else if(!0===e.dataset.charactername.includes("genie")){clearInterval(window.movementInt),window.moveSpeed=20,se();const e=document.querySelector('.storage-item[title="throwing-knives"]');window.attackMultiplier=0,O(e)}else clearInterval(window.movementInt),window.moveSpeed=20,se();e.dataset.charactername=t||"mc"}}(t),e.classList.remove("engage")}))}))}function b(e){if(e){const t=e.dataset.path,a=e.dataset.speed,n=e.dataset.timebetween,o=e.dataset.repeat;if(t){const s=JSON.parse(t);s.unshift({top:e.style.top.replace("px",""),left:e.style.left.replace("px","")});const r=s.length-1;let c,i,l=0,d=1,u=0,m=0,p=!0;if(s&&1!==s.length){let t=s[l].left,g=s[l].top,y=!1;window.walkingInterval=setInterval((()=>{if("false"!==e.dataset?.canmove){const w=e.querySelector(".character-icon.engage");function h(){t=e.offsetLeft,g=e.offsetTop,requestAnimationFrame(h)}d=l===r?0:l+1,m=function(e,t,a,n,o,s="0.75"){const r=Math.hypot(e-a,t-n)*parseFloat(s)*o;return Math.ceil(r/250)}(s[l].left,s[l].top,s[d].left,s[d].top,a,n),u===m-1||p?((r>l||p&&r===l)&&(w.classList.remove("engage"),c=V(s[l].left,s[l].top,s[d].left,s[d].top,e,a),e.style.left=s[d].left+"px",e.style.top=s[d].top+"px",i=e.querySelector("#"+re(e.className)+c),i&&i.classList.add("engage")),!1===p?r>d?(u=0,p=!0,0!==d?l++:l=0):"true"===o&&(p=!0,l=r,u=0):(p=!1,u++)):u++,h(),y=!1}else!1===y&&(m+=1,l=0<l?l-1:r,e.style.left=t+"px",e.style.top=g+"px",y=!0)}),250)}else V(e.style.left.replace("px",""),e.style.top.replace("px",""),s[l].left,s[l].top,e,a),e.style.left=s[d].left+"px",e.style.top=s[d].top+"px"}}}function q(e,t,a,n,o=""){!0===n&&T(a,t),e>100&&"point"!==t&&(e=100),e<0&&"health"===t&&(e=0);const r=document.querySelector(`.${t}-amount`);let c=!1;r&&(c=r.querySelector(".gauge")),explorePoints&&explorePoints[t]&&!1===explorePoints[t].positions.includes(a)&&!1===Array.isArray(a)?explorePoints[t].positions.push(a):explorePoints&&explorePoints[t]&&!1===explorePoints[t].positions.includes(a)&&!0===Array.isArray(a)&&a.forEach((e=>{explorePoints[t].positions.push(e)})),c&&"point"!==t?(r.setAttribute("data-amount",e),c.style.width=e+"px"):"point"===t&&(r.setAttribute("data-amount",e),c.style.width=I(e),function(e){const t=document.querySelectorAll("[data-unlockable]");t&&t.forEach((t=>{const a=t.dataset.unlockable;parseInt(e)>=parseInt(a)&&"explore-magic"===t.dataset.genre&&(navigator.vibrate(1e3),function(e){const t=`https://${wpThemeURL}/wp-json/orbemorder/v1/addspell/`,a={spellid:e,userid:currentUserId};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}(t.id),t.remove())}))}(e)),"health"===t&&0===e&&function(){const e=document.querySelector(".game-over-notice");if(e){clearInterval(s);const t=document.querySelector(".try-again"),a=document.querySelector(".default-map");e.style.display="block",window.allowMovement=!1,h=!1,f=!1,x("projectile","health",100,0,"true"),a&&C(a.dataset.startleft,a.dataset.starttop),t&&t.addEventListener("click",(()=>{window.location.reload()}))}}(),""!==a&&!0===["point","health","mana"].includes(t)&&a!==o&&x(a,t,e)}function x(t,a="point",n=0,o=2e3,s=""){const r=`https://${wpThemeURL}/wp-json/orbemorder/v1/add-explore-points/`;"health"===a&&0===n||""!==t&&(clearTimeout(e),!1===Array.isArray(t)?l.push(t):l=t.concat(l),"health"===a&&(l=["projectile"]),e=setTimeout((()=>{const e={type:a,item:l,userid:currentUserId,amount:n,reset:s};fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);l=[]}))}),o))}function I(e){return e/window.nextLevelPointAmount*100+"%"}function k(e,a,n){clearTimeout(t),t=setTimeout((()=>{const t=document.querySelector("."+e+"-mission-item");if(t){const o=t.dataset.points,s=t.dataset.hazardremove,r=t.dataset.ability;E(t);const c=t.dataset.blockade;if(""!==c&&"0"!==JSON.parse(c).top&&document.querySelector("."+t.className.replace("mission-item ","")+"-blockade").remove(),t.style.textDecoration="line-through",null!==s&&s){const e=s.split(",");e&&e.forEach((e=>{const t=document.querySelector("."+e+"-drag-dest-map-item");document.querySelector("."+e+"-map-item").remove(),t&&t.remove(),(!0===Array.isArray(n)&&!1===n.includes(e)||!1===Array.isArray(n)&&n!==e)&&x(e)}))}if(setTimeout((()=>{t.remove(),r&&"transportation"===r&&(de(),function(){const e={slug:"transportation",userid:currentUserId};fetch(`https://${wpThemeURL}/wp-json/orbemorder/v1/enable-ability/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}())}),500),a){const t=document.querySelector(`.map-cutscene[data-mission="${e}"]`);t&&ae(re(t.className),!1,!0),le(a,n,!0,o,e)}}const o=`https://${wpThemeURL}/wp-json/orbemorder/v1/mission/`,s={userid:currentUserId,mission:e};fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}),500)}function E(e){const t=""!==e.dataset.nextmission&&e.dataset.nextmission.split(",");!1!==t&&t.forEach((e=>{if(1===document.querySelectorAll('[data-nextmission*="'+e+'"]').length){const t=document.querySelector("."+e+"-mission-item");if(t){const e=t.dataset.blockade;""!==e&&"0"!==JSON.parse(e).top&&(document.querySelector("."+t.className.replace("mission-item ","").replace("next-mission ","")+"-blockade").style.display="block"),t.classList.add("engage")}}}))}function A(e,t,a,n){const o={type:e,itemid:t,amount:a,userid:currentUserId,unequip:n};fetch(`https://${wpThemeURL}/wp-json/orbemorder/v1/equip-explore-item/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}function T(e,t){const a=document.querySelector('.retrieval-points span[title="'+e+'"]'),n=a.getAttribute("data-count");a&&(n&&1<n?a.setAttribute("data-count",n-1):(a.setAttribute("data-type",""),a.setAttribute("data-id",""),a.setAttribute("data-value",""),a.setAttribute("title",""),a.setAttribute("data-empty","true"),a.setAttribute("data-count","")),N(0,e,t,0,!0))}function N(e,t,a,n,o){const s=`https://${wpThemeURL}/wp-json/orbemorder/v1/save-storage-item/`,r={user:currentUserId,id:e,name:t,value:n,type:a,remove:o};fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}function C(e,t){const a=`https://${wpThemeURL}/wp-json/orbemorder/v1/coordinates/`,n={left:e.replace("px",""),top:t.replace("px",""),userid:currentUserId};fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}window.godMode=!1,window.noTouch=!1,document.addEventListener("DOMContentLoaded",(function(){if(v=document.querySelector(".container"),v=v.className.replace("container ",""),document.querySelector(".page-template-explore")){window.history.pushState({},document.title,window.location.pathname);const e=document.getElementById("intro-video");if(e){const t=document.querySelector(".intro-video.engage");e.addEventListener("ended",(()=>{t&&(t.classList.remove("engage"),ye())}));const a=document.getElementById("skip-intro-video");a&&a.addEventListener("click",(()=>{e.pause(),t&&t.classList.remove("engage"),ye()}))}const t=document.getElementById("explore-create-account"),a=document.getElementById("explore-login-account"),n=document.querySelector(".login-form"),o=document.querySelector(".register-form");t&&n&&a&&(t.addEventListener("click",(()=>{n.style.display="none",o.style.display="block",t.style.display="none",a.style.display="block"})),a.addEventListener("click",(()=>{n.style.display="block",o.style.display="none",a.style.display="none",t.style.display="block"}))),"undefined"!=typeof exploreAbilities&&exploreAbilities.includes("transportation")&&de(),document.addEventListener("keydown",(e=>{const t=document.querySelector(".dragme");if(16===e.keyCode||32===e.keyCode)if(t&&!0===t.classList.contains("currently-dragging")){setTimeout((()=>{window.allowHit=!0}),100),t.classList.remove("currently-dragging"),t.classList.remove("dragme"),t.style.left=window.dragLeft.left?parseInt(t.style.left.replace("px",""))-2+"px":parseInt(t.style.left.replace("px",""))+2+"px",t.style.top=window.dragTop.higher?parseInt(t.style.top.replace("px",""))-2+"px":parseInt(t.style.top.replace("px",""))+2+"px",window.dragLeft=!1,window.dragTop=!1;const e=re(t.className),a=document.querySelector("."+e+"-drag-dest-map-item");if(a){const n=parseInt(a.style.left.replace("px","")),o=parseInt(a.style.top.replace("px","")),s=parseInt(t.style.left.replace("px","")),r=parseInt(t.style.top.replace("px",""));(r<o?o-r:r-o)<10&&(s<n?n-s:s-n)<10&&!1===a.classList.contains("completed-mission")&&(k(a.dataset.mission,document.querySelector("."+a.dataset.mission+"-mission-item"),e),a.classList.add("completed-mission"))}const n=`https://${wpThemeURL}/wp-json/orbemorder/v1/save-drag/`,o={slug:e,top:t.style.top.replace("px",""),left:t.style.left.replace("px",""),userid:currentUserId};fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}else!function(){const e=document.querySelector(".dragme"),t=document.querySelector("#map-character");if(e){window.allowHit=!1;const a=parseInt(e.style.top.replace("px","")),n=parseInt(e.style.left.replace("px","")),o=parseInt(t.style.top.replace("px",""))+450,s=parseInt(t.style.left.replace("px",""))+450,r=a<o,c=n<s,i=a<o?o-a:a-o,l=n<s?s-n:n-s;window.dragTop={offset:i,higher:r},window.dragLeft={offset:l,left:c},e.classList.add("currently-dragging")}else window.dragTop=!1,window.dragLeft=!1}()}));const s=document.querySelectorAll(".spell"),r=document.getElementById("weapon");s&&r&&(s.forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(".spell.engage"),a=document.querySelector("#weapon"),n=document.querySelector(".map-weapon"),o=e.getAttribute("data-type"),s=e.getAttribute("title"),r=e.getAttribute("data-value");a.classList.remove("engage"),t&&t.classList.remove("engage"),e.classList.add("engage"),n.className="map-weapon",n.classList.add(o),n.classList.add(s),n.classList.add("spell"),n.setAttribute("data-value",r),window.weaponTime=r}))})),r.addEventListener("click",(()=>{const e=document.querySelector(".spell.engage"),t=document.querySelector(".map-weapon");e&&(e.classList.remove("engage"),t.className="map-weapon",window.weaponTime=400),r.classList.add("engage")})));const c=document.querySelector(".character-item > img");c&&(G(),c.classList.remove("engage"));const i=document.querySelectorAll("#explore-points .point-bar");i&&i.forEach((e=>{const t=e.getAttribute("data-amount"),a=e.querySelector(".gauge");if(a&&!1===e.classList.contains("point-amount"))e.setAttribute("data-amount",t),a.style.width=t+"px";else{const n=pe(t);levelMaps&&(window.nextLevelPointAmount=JSON.parse(levelMaps)[n],e.setAttribute("data-amount",t),a.style.width=I(t))}})),document.body.style.position="fixed";const l=document.getElementById("engage-explore");l&&l.addEventListener("click",(function(){Y()}));const d=document.getElementById("primary");d&&!0===d.classList.contains("reset")&&Y();const u=document.querySelectorAll("#settings, #storage, #characters, #new-addition");u&&u.forEach((e=>{if("storage"===e.id){const e=document.querySelectorAll(".retrieval-points .storage-item");e&&e.forEach((e=>{e.addEventListener("click",(()=>{M(e)}))}))}e.addEventListener("click",(t=>{!1===t.target.classList.contains("close-settings")&&!1===t.target.parentNode.classList.contains("character-item")&&e.classList.add("engage")})),e.querySelector(".close-settings").addEventListener("click",(()=>{const t=document.querySelector(".retrieval-points #item-description");e.classList.remove("engage"),t&&(t.innerHTML="")}))}));const m=document.getElementById("update-settings"),p=document.getElementById("music-volume"),g=document.getElementById("sfx-volume"),y=document.getElementById("talking-volume");m&&(g&&p&&y&&(window.sfxVolume=g.value/100,window.talkingVolume=y.value,p.addEventListener("input",(e=>{window.currentMusic.volume=e.target.value/100})),y.addEventListener("input",(e=>{window.talkingVolume=e.target.value,console.log(window.talkingVolume)})),g.addEventListener("input",(e=>{window.sfxVolume=e.target.value/100}))),m.addEventListener("click",(()=>{p&&g&&y&&function(e,t,a){const n={music:e,sfx:t,talking:a,userid:currentUserId};fetch(`https://${wpThemeURL}/wp-json/orbemorder/v1/save-settings/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}(p.value,g.value,y.value)})));const w=document.querySelectorAll(".menu-tabs div");w&&w.forEach(((e,t)=>{e.addEventListener("click",(()=>{const a=document.querySelector(".menu-tabs .engage");a&&a.classList.remove("engage"),e.classList.add("engage");const n=document.querySelectorAll(".storage-menu"),o=document.querySelector(".storage-menu.engage");o&&o.classList.remove("engage"),n&&n[t].classList.add("engage")}))}))}const e=document.getElementById("new-explore");e&&e.addEventListener("click",(async()=>{confirm("Are you sure you want to start a new game? All your previously saved data will be lost."),await async function(){const e=`https://${wpThemeURL}/wp-json/orbemorder/v1/resetexplore/`,t={userid:currentUserId};fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}(),setTimeout((()=>{window.location.href=gameURL}),1e3)}));const t=document.getElementById("create-account"),a=document.getElementById("login-account");if(t&&a){const e=document.querySelector(".login-form"),n=document.querySelector(".register-form");t.addEventListener("click",(()=>{e&&n&&(e.style.display="none",n.style.display="block",a.style.display="block",t.style.display="none")})),a.addEventListener("click",(()=>{e&&n&&(e.style.display="block",n.style.display="none",a.style.display="none",t.style.display="block")}))}}));const B=function(){let e=!1;return function(t,a){if(a&&t&&ie(t.getBoundingClientRect(),a.getBoundingClientRect())&&!1===e){if("explore-enemy"===a.dataset.genre&&!1===t.classList.contains("protection")){var n;const e=a.dataset.health,o=a.dataset.healthamount,s=a.dataset.mission;let r=!0===t.classList.contains("heavy-engage")?"heavy":"normal";r=!0===t.classList.contains("charge-attack-engage")?"charged":r;const c=parseInt(JSON.parse(t.dataset.strength)[r])+window.attackMultiplier,i=0<=e-c?e-c:0,l=null!==(n=a.dataset.weapon)&&void 0!==n?n:"";if((""!==l&&t.dataset.weapon===l||""===l)&&a.setAttribute("data-health",i),"boss"===a.getAttribute("data-enemy-type")&&(i<=.75*o&&!1===g?(g=!0,U(a)):i<=.5*o&&!1===y?(y=!0,U(a)):i<=.25*o&&!1===w&&(w=!0,U(a))),0===i){clearInterval(window.shooterInt),clearInterval(window.runnerInt),a.remove();const e=re(a.className),t=`https://${wpThemeURL}/wp-json/orbemorder/v1/enemy/`,n={userid:currentUserId,health:0,position:e};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)})),s&&Z(s)&&k(s,a,s)}}e=!0,setTimeout((()=>{e=!1}),1e3)}}}(),j=function(){window.runningPointFunction=!1;let e=!1;return function(t,a,n,o){window.allowMovement=!1,clearInterval(window.shooterInt),clearInterval(window.runnerInt),clearInterval(window.walkingInterval);const s=document.querySelector(".default-map");if(s&&s.remove(),!1===e){const r=`https://${wpThemeURL}/wp-json/orbemorder/v1/area/`;let c="";musicNames&&(c=musicNames[t]);const i={userid:currentUserId,position:t};fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.json()})).then((e=>{let r=e;r=JSON.parse(r.data);const i=document.getElementById("map-item-styles"),l=document.getElementById("map-character"),d=document.querySelector(".container"),u=document.querySelector("head");i&&i.remove();const m=document.createElement("style");m.id="map-item-styles",m.innerHTML=r["map-item-styles-scripts"];const p=document.querySelector(".missions-content");if(p&&(p.innerHTML=r["map-missions"],""!==window.nextAreaMissionComplete)){const e=document.querySelector("."+window.nextAreaMissionComplete+"-mission-item");e&&(e.style.textDecoration="line-through",setTimeout((()=>{E(e),e.remove()}),500))}const g=document.querySelector(".characters-content");if(g){g.innerHTML=r["map-characters"],0<g.querySelectorAll(".character-item").length&&(document.getElementById("characters").style.display="block"),L(),we();const e=document.getElementById("characters"),t=e.querySelector(".close-settings");t&&t.addEventListener("click",(()=>{e.classList.remove("engage")}))}u&&u.append(m),s&&setTimeout((()=>{const e=document.createElement("div");e.className="default-map",e.innerHTML=r["map-items"]+r["map-cutscenes"]+r.minigames+r["map-svg"],d&&(d.append(e),G());const a=document.querySelectorAll('.path-onload[data-path]:not([data-path=""])');a&&a.forEach((e=>{b(e)})),X(),W();const n=document.querySelectorAll(".map-cutscene .wp-block-orbem-paragraph-mp3:first-of-type");if(n&&n.forEach((e=>{e.classList.add("engage")})),"yes"===r["is-cutscene"]){e.dataset.iscutscene="yes",ae(t,!0);const a=document.querySelector(".container");a&&(window.previousCutsceneArea=a.className.replace("container ",""))}e.dataset.starttop=r["start-top"],e.dataset.startleft=r["start-left"],""!==window.previousCutsceneArea&&oe(document.querySelectorAll("[data-removeaftercutscene]"),window.previousCutsceneArea);const o=document.querySelectorAll('[data-crewmate="yes"]');if(0<o.length){let e=0;const t=setInterval((()=>{e===o.length-1&&clearInterval(t),function(e){const t=`https://${wpThemeURL}/wp-json/orbemorder/v1/add-character/`,a={userid:currentUserId,slug:e};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}(re(o[e].className)),e++}),1e3)}}),700),setTimeout((()=>{o&&(r["start-top"]=JSON.parse(o).top,r["start-left"]=JSON.parse(o).left),l.style.top=r["start-top"]+"px",l.style.left=r["start-left"]+"px",l.scrollIntoView({behavior:"instant",block:"center",inline:"center"});const e=document.querySelector(".container");e.className="container "+t,e.style.backgroundImage="url("+n+")",v=t,$(c,t),window.allowMovement=!0,a.style.display="block"}),100)})),e=!0,setTimeout((()=>{e=!1}),1e3)}}}(),M=function(){let e=!1;return function(t){const a=t.getAttribute("data-id"),n=document.querySelector(".storage-item.engage");if(n&&n.classList.remove("engage"),t.classList.add("engage"),!1===e){const t=`https://${wpThemeURL}/wp-json/orbemorder/v1/get-item-description/`,n={userid:currentUserId,id:a};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.json()})).then((e=>{let t=e;t=JSON.parse(t.data);const a=document.querySelector(".retrieval-points #item-description"),n=document.querySelector(".storage-item.engage");a.innerHTML=t;const o=a.querySelector(".use-button"),s=a.querySelector(".drop-button"),r=a.querySelector(".equip-button"),c=a.querySelector(".unequip-button"),i=n.getAttribute("data-id"),l=n.getAttribute("title"),d=n.getAttribute("data-value"),u=n.getAttribute("data-type");o&&n&&100>P(u)&&o.addEventListener("click",(()=>{le(n,l),a.innerHTML=""})),s&&s.addEventListener("click",(()=>{T(l,u),a.innerHTML=""})),r&&r.addEventListener("click",(()=>{const e=document.querySelector(".map-character-icon.engage").dataset.currentchar,t=document.querySelector(".storage-item.engage");if(t&&t.dataset.character===e||t&&(""===t.dataset.character||void 0===t.dataset.character||null===t.dataset.character)){const e=t.querySelector("img"),a=document.querySelector(".map-weapon"),n=document.querySelector(".weapon-content img"),o=a.querySelector("img");a&&n&&(o.src=e.src,n.src=e.src,a.dataset.weapon=t.title,o.style.width=t.dataset.width+"px",o.style.height=t.dataset.height+"px",a.dataset.strength=t.dataset.strength),t.classList.add("equipped"),t.classList.add("being-equipped")}R(!1),a.innerHTML="",A(u,i,d,!1)})),c&&c.addEventListener("click",(()=>{const e=document.querySelector(".storage-item.engage");e&&(e.classList.remove("equipped"),e.classList.add("unequip")),R(!0),a.innerHTML="",A(u,i,d,!0)}))})),e=!0,setTimeout((()=>{e=!1}),1e3)}}}();function O(e){if(e){const t=e.querySelector("img"),a=document.querySelector(".map-weapon"),n=document.querySelector(".weapon-content img"),o=a.querySelector("img");a&&n&&(o.src=t.src,n.src=t.src,a.dataset.weapon=e.title,o.style.width=e.dataset.width+"px",o.style.height=e.dataset.height+"px",a.dataset.strength=e.dataset.strength,a.dataset.projectile=e.dataset.projectile)}}function R(e){const t=document.querySelector('.storage-item.being-equipped[data-type="gear"]'),a=(document.querySelector('.store-item.being-equipped[data-type="weapons"]'),document.querySelector("#explore-points .health-amount")),n=document.querySelector("#explore-points .mana-amount");let o=parseInt(n.dataset.amount),s=parseInt(a.dataset.amount),r=parseInt(n.style.width.replace("px","")),c=parseInt(a.style.width.replace("px",""));if(t&&!1===e){const e=t.getAttribute("data-value"),a=t.getAttribute("data-subtype");"health"===a&&(s+=parseInt(e),c+=parseInt(e)),"mana"===a&&(o+=parseInt(e),r+=parseInt(e))}else if(t&&!1!==e){const e=document.querySelector('.storage-item.unequip[data-type="gear"]'),t=e.getAttribute("data-value"),a=e.getAttribute("data-subtype");"health"===a&&(s-=parseInt(t),c-=parseInt(t)),"mana"===a&&(o-=parseInt(t),r-=parseInt(t))}t&&(a.style.width=c+"px",a.setAttribute("data-amount",s),a.querySelector(".gauge").style.width=s+"px",n.style.width=r+"px",n.setAttribute("data-amount",o),n.querySelector(".gauge").style.width=o+"px");const i=document.querySelector(".being-equipped"),l=document.querySelector(".unequip");i&&i.classList.remove("being-equipped"),l&&l.classList.remove("unequip")}function P(e){const t=document.querySelector(`#explore-points .${e}-amount`);return parseInt(t.getAttribute("data-amount"))}function $(e,t){const a=document.createElement("audio");a.setAttribute("loop",""),a.src=e,a.id=t,document.body.appendChild(a);const n=document.getElementById("music-volume");n&&a&&(a.volume=n.value/100),window.currentMusic&&window.currentMusic.pause(),a&&(a.play(),window.currentMusic=a)}function D(e,t){e.getAttribute("data-speed");const a=e.getAttribute("data-enemy-type");t&&t.remove(),"shooter"===a&&J(e),"runner"===a&&(window.runnerInt=setInterval((()=>{const t=re(e.className),a=document.querySelector("."+t+"-map-item"),n=document.querySelectorAll(".default-map svg rect, .protection");let o=parseInt(a.style.left,10),s=parseInt(a.style.top,10);const r=document.getElementById("map-character");if(o<parseInt(r.style.left.replace("px",""))+400?o+=1:o-=1,s<parseInt(r.style.top.replace("px",""))+300?s+=1:s-=1,n&&a){const e=ce(n,a.getBoundingClientRect(),s,o,!0);a.style.left=e.left+"px",a.style.top=e.top+"px"}}),20)),"boss"===a&&U(e)}function U(e){const t=e.dataset.waves.split(",");t&&(t.forEach((t=>{e.classList.remove(t+"-wave-engage")})),e.classList.add(t[p]+"-wave-engage"),"pulse"===t[p]?r=setInterval((()=>{e.classList.toggle("pulse-in")}),13e3):r&&(clearInterval(r),e.classList.remove("pulse-in")),"barrage"===t[p]?J(e):clearInterval(s)),p++}function J(e){const t=e.dataset.enemyspeed;s=window.shooterInt=setInterval((()=>{const a=document.querySelector(".map-character-icon.engage"),n=a.getBoundingClientRect().left+a.width/2,o=a.getBoundingClientRect().top+a.width/2,s=e.querySelector(".projectile");s&&z(s,n,o,e,t,!1,".projectile","no")}),5e3)}function z(e,t,a,n,o,s,r,c="no"){const i=e.cloneNode(!0);i.classList.remove("engage"),i.style.transition="",!0!==s&&"no"===c?function(e,t,a,n,o){let s=0,r=0;const c=e.getBoundingClientRect(),i=document.getElementById("map-character"),l=F(o),d=F(i);V(d.x,d.y,l.x,l.y,e,n);const u=Math.atan2(a-c.top,t-c.left),m=t+800*Math.cos(u),p=a+800*Math.sin(u);s=m-c.left,r=p-c.top,e.style.transform="translate("+s+"px, "+r+"px)"}(e,t,a,o,n):!0===s?(e.classList.remove("map-weapon"),e.classList.add("magic-weapon"),H(e,t,a),n=document.querySelector(".container")):"yes"===c&&(H(e,t,a),n=document.querySelector(".container"));const l=setInterval((function(){const e=n.querySelector(r);let t=document.querySelectorAll(".default-map svg rect, .protection, .map-character-icon.engage, #map-weapon img");!0!==s&&"yes"!==c||(t=document.querySelectorAll(".default-map svg rect, .enemy-item, .map-item")),t&&e&&t.forEach((t=>{if(ie(e.getBoundingClientRect(),t.getBoundingClientRect())){if(!0===t.classList.includes("map-character-icon")&&".map-weapon"!==r){const t=parseInt(e.getAttribute("data-value")),a=document.querySelector("#explore-points .health-amount"),n=parseInt(a.getAttribute("data-amount"));a&&0<=n&&q(n>=t?n-t:0,"health","projectile")}e.remove(),window.weaponConnection=!0}}))}),20);setTimeout((()=>{if(!0===s||"true"===c){const e=document.getElementById("map-character").className.replace("-dir","");i.setAttribute("data-direction",e)}n.appendChild(i),e.remove(),window.weaponConnection=!0,clearInterval(l)}),4500)}function H(e,t,a){window.weaponConnection=!1,e.style.transition="all 3s",e.style.left=t+"px",e.style.top=a+"px"}function V(e,t,a,n,o,s){const r=.075*Math.hypot(e-a,t-n)*s;let c="down";return o.style.transition="all "+r+"ms linear 0s",t<n?c="up":t>n?c="down":e<a?c="right":e>a&&(c="left"),c}function F(e){const{top:t,left:a,width:n,height:o}=e.getBoundingClientRect();return{x:a+n/2,y:t+o/2}}function G(){["health","mana","point","gear","weapons"].forEach((e=>{const t=void 0!==explorePoints[e]?explorePoints[e].positions:[];t&&t.forEach((e=>{const t=document.querySelector("."+e+"-map-item"),a=document.querySelector("."+e+"-materialize-item-map-item"),n=document.querySelector("."+e+"-drag-dest-map-item");t&&(function(e){return void 0!==e.dataset.timer&&null!==e.dataset.timer||"explore-character"===e.dataset.genre||"true"===e.dataset.hazard||"true"===e.dataset.collectable||"true"===e.dataset.breakable&&"false"!==e.dataset?.disappear||"true"===e.dataset.removable&&"false"!==e.dataset?.disappear}(t)&&(t.remove(),a&&a.remove(),n&&"true"===n.dataset.removable&&n.remove()),"false"===t.dataset?.disappear&&K(t),t.classList.add("no-point"))}));const a=document.querySelectorAll(".map-item-modal.graeme"),n=document.querySelectorAll(".map-item-modal");n&&n.forEach((e=>{e.classList.remove("engage")})),a&&a.forEach((e=>{e.classList.add("engage")}))}))}function Y(){const e=document.querySelector(".touch-buttons"),t=document.querySelectorAll(".map-cutscene .wp-block-orbem-paragraph-mp3:first-of-type");t&&t.forEach((e=>{e.classList.add("engage")})),ye(!1),window.weaponConnection=!0,window.allowHit=!0,window.allowIndicate=!0,window.attackMultiplier=0,window.runningPointFunction=!1,window.moveSpeed=20,window.currentCharacterAutoDirection="",L(),X();const a=document.getElementById("characters"),n=a.querySelectorAll(".character-item");a&&0<n.length&&(a.style.display="block"),document.querySelector(".explore-overlay").remove(),document.body.style.position="unset",e&&e.classList.add("do-mobile");let s="";musicNames&&v&&(s=musicNames[v]),$(s,v),document.getElementById("explore-points").style.opacity="1",document.getElementById("missions").style.opacity="1";const r=document.getElementById("key-guide");he(r,"engage"),he(e,"engage"),window.buttonShow=setInterval((function(){he(e,"engage"),he(r,"engage")}),1e4);const c=document.querySelectorAll('.path-onload[data-path]:not([data-path=""])');if(c&&c.forEach((e=>{b(e)})),W(),function(){let e=200,t=!1,a=!1;document.addEventListener("keydown",(e=>{const t=document.querySelector(".map-weapon");!1!==window.allowHit&&(!0===["ShiftLeft","ShiftRight"].includes(e.code)&&(u=!0),"Space"===e.code&&(m=!0,o=setTimeout((()=>{!0===m&&(t.classList.add("charge-engage"),a=!0)}),1e3)))})),document.addEventListener("keyup",(n=>{const s=document.querySelector(".map-weapon"),r="fist"===s.dataset.weapon?"punch":s.dataset.weapon,c="top"===s.dataset.direction?"up":s.dataset.direction,i=document.querySelector("#map-character");let l=i.querySelector(".map-character-icon.engage");const d=i.querySelector(`#mc-${c}-${r}`);if(!1!==window.allowHit){const r=document.querySelector("#explore-points .mana-amount"),c=r.getAttribute("data-amount");if(!0===["ShiftLeft","ShiftRight"].includes(n.code)&&(u=!1),"Space"===n.code&&(m=!1,clearTimeout(o),s&&!1===t)){const n=s.classList.contains("spell");if(e=s.classList.contains("protection")?8e3:100,("true"===s.dataset.projectile||!0===n&&0<c||!1===n&&!1===a)&&(s.classList.add("engage"),l&&(l.classList.add("punched"),d.classList.add("engage"))),0<c&&!0===n){const e=s.getAttribute("data-value");r.setAttribute("data-amount",parseInt(c)-parseInt(e)),r.classList.add("engage");let t=parseInt(c)-parseInt(e);t=0>t?0:t,q(t,"mana","magic"),setTimeout((()=>{r.classList.remove("engage")}),500)}if("true"===s.dataset.projectile||!0===n||!1===n&&!1===t&&!1===u?setTimeout((()=>{!1===s.classList.contains("heavy-engage")&&(s.classList.remove("engage"),l.classList.remove("punched"),d.classList.remove("engage"))}),e):!0===u&&(s.classList.add("heavy-engage"),t=!0,setTimeout((()=>{t=!1,s.classList.remove("heavy-engage"),s.classList.remove("engage"),l.classList.remove("punched"),d.classList.remove("engage"),u=!1}),500)),0<c&&s&&("yes"===s.dataset.projectile||!0===n)){let e=parseInt(s.style.left.replace("px","")),t=parseInt(s.style.top.replace("px",""));const a=!0===n?".magic-weapon":".map-weapon";switch(s.getAttribute("data-direction")){case"down":t+=1e4;break;case"top":t-=1e4;break;case"left":e-=1e4;break;case"right":e+=1e4}z(s,e,t,document,2,n,a,s.dataset.projectile)}!0===a&&(a=!1,s.classList.remove("charge-engage"),s.classList.add("charge-attack-engage"),setTimeout((()=>{s.classList.remove("charge-attack-engage"),l.classList.remove("punched"),d.classList.remove("engage")}),700))}}else if("Space"===n.code){const e=document.querySelector(".indicator-icon");if(e&&!0===e.classList.contains("engage")){const t=e.dataset?.cutscene,a=e.dataset?.sign;t&&""!==t&&(ae(t,!1,!1),e.dataset.cutscene=""),a&&""!==a&&(function(e){const t=document.querySelector("."+e+"-map-item");t.classList.add("open-up"),document.addEventListener("click",(()=>{t.classList.remove("open-up")}),{once:!0})}(a),e.dataset.sign="")}}}))}(),se(),"yes"===document.querySelector(".default-map").dataset.iscutscene&&v){const e=v;window.previousCutsceneArea=e,ae(e,!0)}const i=document.querySelectorAll('.map-cutscene[data-dependent="yes"]');if(i&&0<i.length){const e=i[0].dataset.minigame;let t=i[0].dataset.mission;if(e&&""!==e&&(t=document.querySelector("."+e+"-minigame-item"),t&&(t=t.dataset.mission)),""!==t){null==document.querySelector("."+t+"-mission-item")&&ae(re(i[0].className))}}""!==window.previousCutsceneArea&&oe(document.querySelectorAll("[data-removeaftercutscene]"),window.previousCutsceneArea),we();const l=document.getElementById("map-character");l&&l.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}function X(){const e=document.querySelectorAll(".materialize-item-trigger");e&&e.forEach((e=>{const t=re(e.className),a=document.querySelector("."+t+"-map-item"),n=document.querySelector("."+t+"-drag-dest-map-item");a&&(a.style.display="none"),n&&(n.style.display="none")}))}function W(){const e=document.querySelectorAll(".mission-list .mission-item");e&&e.forEach((e=>{const t=e.dataset.blockade;if(""!==t){const a=JSON.parse(t);if("0"!==a.height){const t=document.createElement("div"),n=e.className.replace("mission-item",""),o=document.querySelector(".default-map");t.className="wp-block-group map-item is-layout-flow wp-block-group-is-layout-flow "+n+"-blockade",t.style.top=a.top+"px",t.style.left=a.left+"px",t.style.width=a.width+"px",t.style.height=a.height+"px",!0===t.classList.contains("next-mission")&&(t.style.display="none"),o&&o.append(t)}}}))}function Q(e,t,n,o,s,r){const l=document.querySelector(".container"),d=document.querySelector("#map-character");let u=d.querySelector(".map-character-icon.engage");const m=document.querySelectorAll('.map-item:not(.drag-dest), .projectile, .enemy-item, [data-hazard="true"]');let p=document.querySelector(".map-weapon");const g=document.querySelector(".magic-weapon");if(g&&(p=g),0<m.length&&!1===window.noTouch&&m.forEach((e=>{let t=re(e.className);e.classList.contains("enemy-item")&&B(p,e);const n=document.querySelector("."+t+"-drag-dest-map-item");let o=!1;n&&!1===e.classList.contains("no-point")&&(o=document.querySelector("."+n.dataset.mission+"-mission-item"),null===o&&e.classList.add("no-point"));const s=document.querySelector(".indicator-icon");if(e&&u&&ie(u.getBoundingClientRect(),e.getBoundingClientRect(),5)?"explore-character"===e.dataset.genre&&""!==e.dataset.path&&(e.dataset.canmove="false"):"false"===e.dataset?.canmove&&(e.dataset.canmove="true"),e&&u&&ie(u.getBoundingClientRect(),e.getBoundingClientRect())){if(navigator.vibrate(1e3),"explore-sign"===e.dataset.genre&&!1===e.classList.contains("engage")&&(ee(e,!1),e.classList.add("engage"),window.allowHit=!1),"explore-area"===e.getAttribute("data-genre"))return void function(e){const t=re(e.className),a=e.getAttribute("data-map-url"),n=document.querySelector(".map-weapon");n&&(n.style.display="none"),j(t,n,a)}(e);var r;if("true"===e.dataset.hazard&&!1===_(e,d,"hazard")?(h=!0,window.theHazardValue=e.dataset.value,f=null!==(r=e.closest(".enemy-item"))&&void 0!==r?r:e):"true"===e.dataset.hazard&&!0===_(e,d,"hazard")&&setTimeout((()=>{h=!1}),100),n&&(o=document.querySelector("."+n.dataset.mission+"-mission-item")),"true"===e.dataset.draggable&&!1===e.classList.contains("dragme")&&_(e,d,"strength")&&o&&e.classList.add("dragme"),"true"===e.dataset.trigger&&!1===e.classList.contains("cutscene-trigger")){const t=document.querySelector("."+e.dataset.triggee);t&&"explore-enemy"===e.dataset.genre&&D(t,e)}if(!0===e.classList.contains("explainer-trigger")&&!1===e.classList.contains("already-hit")){const t=document.querySelector("."+e.dataset.triggee+"-explainer-item");if(t){t.classList.add("engage"),e.classList.add("already-hit");const a=t.querySelector("img"),n=parseInt(a.dataset.rotate);let o=!1,s=!1,r=!1;if(a&&n&&0<n&&(0<n&&90>=n&&(o=`rotate(${n}deg) translate( 10px, -10px )`,s=`rotate(${n}deg) translate( 10px, 10px )`,r=`rotate(${n}deg) translate( 10px, -10px )`),91<n&&180>=n&&(o=`rotate(${n}deg) translate( 0, 10px )`,s=`rotate(${n}deg) translate( -10px, -10px )`,r=`rotate(${n}deg) translate( 0, 10px )`),181<n&&270>=n&&(o=`rotate(${n}deg) translate( -10px, 10px )`,s=`rotate(${n}deg) translate( -10px, -10px )`,r=`rotate(${n}deg) translate( -10px, 10px )`),271<n&&360>=n&&(o=`rotate(${n}deg) translate( -10px, 0 )`,s=`rotate(${n}deg) translate( -10px, -10px )`,r=`rotate(${n}deg) translate( -10px, 0 )`),!1!==o)){const e=[{transform:o},{transform:s},{transform:r}],t={duration:1e3,iterations:1/0};a.animate(e,t)}t.addEventListener("click",(()=>{t.classList.remove("engage")}))}}!0===e.classList.contains("path-trigger")&&!1===e.classList.contains("already-hit")&&(b(document.querySelector("."+e.getAttribute("data-triggee"))),e.classList.add("already-hit")),"true"===e.getAttribute("data-collectable")&&(e.dataset.mission&&""!==e.dataset.mission&&k(e.dataset.mission,e,t),te(e),"point"===e.dataset.type&&le(e,re(e.className),!1,e.dataset.value,"")),!0===e.classList.contains("mission-trigger")&&(e.dataset.triggee&&""!==e.dataset.triggee&&k(e.dataset.triggee,e,t),e.remove());const s=e.getAttribute("data-triggee");t=s&&""!==s?re(s):t;const c=document.querySelector("."+t+"-map-cutscene");if(!1===e.classList.contains("engage")&&c&&!1===c.classList.contains("been-viewed")&&!0===e.classList.contains("cutscene-trigger")&&("engagement"!==e.dataset.triggertype?(e.dataset.mission&&""!==e.dataset.mission&&k(e.dataset.mission,e,t),ae(t),e.remove()):(e.classList.add("engage"),ee(document.querySelector("."+t+"-map-item")))),!0===e.classList.contains("materialize-item-trigger")){clearTimeout(a);const t=re(e.className),n=document.querySelector("."+t+"-map-item"),o=document.querySelector("."+t+"-drag-dest-map-item");n&&(n.style.display="block"),o&&(o.style.display="block");const s=document.querySelector(".container").className.replace("container ","");i.push(t),a=setTimeout((()=>{!function(e,t){const a={area:e,item:t,userid:currentUserId};fetch(`https://${wpThemeURL}/wp-json/orbemorder/v1/save-materialized-item/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText)}))}(s,i)}),1e3),e.remove()}"true"===e.getAttribute("data-collectable")&&e.remove()}else"true"===e.dataset.hazard||!0===e.classList.contains("engage")||!0===e.classList.contains("dragme")?(e.classList.remove("engage"),e.classList.remove("dragme"),s&&(s.classList.remove("engage"),window.allowHit=!0),setTimeout((()=>{h=!1,f=!1}),100)):setTimeout((()=>{h=!1,f=!1}),100);if(p&&ie(p.getBoundingClientRect(),e.getBoundingClientRect())){const a=re(e.className),n=document.querySelector('[data-timertriggee="'+a+'"]'),o=e.dataset.timertriggee,s=document.querySelector(".start-timer");if((n||void 0!==o)&&s&&!1===e.classList.contains("start-timer")){const a="true"===s.dataset.removable?"":[t,re(s.className)];k(e.dataset.mission,e,a)}else if(n||void 0!==o){e.classList.add("start-timer");const t=void 0!==o?parseInt(e.dataset.timer):parseInt(n.dataset.timer);0<t&&(setTimeout((()=>{e.classList.remove("start-timer")}),1e3*t),function(e){if(!1===S){S=!0;const t=document.createElement("div");t.className="timer-countdown";let a=parseInt(e/1e3);t.style.position="fixed",t.style.right="2rem",t.style.bottom="2rem",t.style.fontSize="2rem",t.style.zIndex="99999",t.textContent=a;const n=document.querySelector(".container");n&&n.appendChild(t),c=setInterval((()=>{const e=document.querySelector(".timer-countdown"),t=parseInt(e.textContent);0!==t&&(a=t),e.textContent=0<a?a-1:0,"0"===e.textContent&&(e.remove(),clearInterval(c),S=!1)}),1e3)}}(1e3*t))}else if(("true"===e.dataset.breakable||"true"===e.dataset.collectable)&&e.dataset.mission&&""!==e.dataset.mission&&_(e,d,"strength")&&null===n&&void 0===o&&Z(e.dataset.mission)){const a=document.querySelectorAll(`.map-item[data-mission="${e.dataset.mission}"]`);a&&(t=[],a.forEach((e=>{t.push(re(e.className))}))),k(e.dataset.mission,e,t)}"true"===e.getAttribute("data-breakable")&&!1===e.classList.contains("interacted-with")&&!1===e.classList.contains("no-point")&&(te(e),"point"===e.dataset.type&&le(e,re(e.className),!1,e.dataset.value,""),e.classList.add("interacted-with")),!0!==Z(e.dataset.mission)||"true"!==e.dataset.breakable||"explore-sign"===e.dataset.genre||!_(e,d,"strength")||null!==e.dataset.minigame&&void 0!==e.dataset.minigame||null!==e.dataset.disappear&&void 0!==e.dataset.disappear||"false"===e.dataset?.disappear?e&&function(e,t){"explore-sign"===e.dataset.genre&&(e.classList.add("open-up"),document.addEventListener("click",(()=>{e.classList.remove("open-up")}),{once:!0})),("true"===e.dataset.draggable&&!0===e.classList.contains("no-point")||(null===e.dataset.draggable||"false"===e.dataset.draggable)&&!1===e.classList.contains("hit"))&&_("",t,"programming")&&function(e){const t=document.querySelector("."+e.dataset.minigame+"-minigame-item");if(t){const a=t.dataset.music;let n=!1;if(t){const o=t.dataset.mission;let s=!1;if(o&&""!==o&&(s=document.querySelector("."+o+"-mission-item"),s&&(n=s.classList.contains("engage"))),n){window.allowMovement=!1,t.classList.add("engage"),e.classList.add("hit"),a&&""!==a&&$(a,o);let r=null,c=0,i=0;function l(e){if(e.preventDefault(),r=e.target.closest(".wp-block-image"),r){const t=r.getBoundingClientRect();c=e.clientX-t.left,i=e.clientY-t.top,e.dataTransfer.setData("text/plain",""),document.addEventListener("mousemove",d)}}function d(e){if(r){const a=t.getBoundingClientRect(),n=e.clientX-a.left,o=e.clientY-a.top;r.style.position="fixed",r.style.zIndex="9",r.style.left=n-c+"px",r.style.top=o-i+"px"}}function u(){if(r){r=null,document.removeEventListener("mousemove",d);const e=document.querySelectorAll(".minigame");e&&e.forEach((e=>{const t=e.querySelector(".computer-chip"),a=t.querySelectorAll("ellipse"),n=e.querySelector(".wires"),r=n.querySelectorAll(".wp-block-image");let c=!1,i=[];function l(e,t){const a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return!(a.right<n.left||a.left>n.right||a.bottom<n.top||a.top>n.bottom)}a&&a.forEach((e=>{r&&r.forEach((t=>{ie(e.getBoundingClientRect(),t.getBoundingClientRect())&&(c=!0)})),i.push(c)})),function(e,t){for(let a of t){let t=!1;for(let n of e)if(l(n,a)){t=!0;break}if(!t)return!1}return!0}(r,a)&&(t.style.display="none",n.style.display="none",function(e,t,a){const n=a.querySelector(".programming-output"),o=a.querySelector(".minigame-programming"),s=a.querySelector(".programming-subject"),r=n.querySelector("textarea");if(o&&s&&(o.classList.add("engage"),s.classList.add("engage")),n&&s&&r){n.prepend(s),r.focus();const o=function(e){let t="";return e.split("").forEach((e=>{let a=e.charCodeAt(0).toString(2);t+=("00000"+a).slice(-5).concat("")})),t}(s.querySelector("strong").textContent);r.addEventListener("keyup",(s=>{if(13===s.which){const s=n.querySelector("textarea");parseInt(s.value)===parseInt(o)&&(k(e,t,e),a.classList.remove("engage"),window.allowMovement=!0,function(e){const t=re(e.className),a=document.querySelector('.map-cutscene[data-minigame="'+t+'"]'),n=a.dataset.video;a&&ae(re(a.className),!1,"true"===n),e.dataset.music&&""!==e.dataset.music&&musicNames&&$(musicNames[v],v)}(a))}}))}}(o,s,e))}))}}document.querySelectorAll(".wp-block-group.wires .wp-block-image").forEach((e=>{e.addEventListener("dragstart",l),e.addEventListener("mouseup",u)}))}}}}(e),"false"!==e.dataset?.disappear&&"true"===e.dataset.breakable&&"explore-sign"!==e.dataset.genre&&(e.style.display="none"),"false"===e.dataset?.disappear&&K(e)}(e,d):e.remove()}})),o[37]||o[38]||o[39]||o[40]||o[87]||o[65]||o[68]||o[83]){const e=function(e){for(var t in e)if(e.hasOwnProperty(t)&&true===e[t])return t;return null}(o),t=!0===o[r]?r:parseInt(e);let a;if(!1===u.classList.contains("fight-image"))switch(t){case 38:case 87:u.classList.remove("engage"),a=document.getElementById("mc-up"),a&&a.classList.add("engage"),d.className="",d.classList.add("top-dir"),p&&p.setAttribute("data-direction","top");break;case 37:case 65:u.classList.remove("engage"),a=document.getElementById("mc-left"),a&&a.classList.add("engage"),d.className="",d.classList.add("left-dir"),p&&p.setAttribute("data-direction","left");break;case 39:case 68:u.classList.remove("engage"),a=document.getElementById("mc-right"),a&&a.classList.add("engage"),d.className="",d.classList.add("right-dir"),p&&p.setAttribute("data-direction","right");break;case 40:case 83:u.classList.remove("engage"),a=document.getElementById("mc-down"),a&&a.classList.add("engage"),d.className="",d.classList.add("down-dir"),p&&p.setAttribute("data-direction","down")}!function(){const e=document.getElementById("walking");e&&(e.loop=!0,e.volume=window.sfxVolume,e.play())}()}else!function(){const e=document.getElementById("walking");e&&(e.pause(),e.currentTime=0)}();const y=l.offsetWidth-u.offsetWidth,w=parseInt(e,10)-(o[t]?s:0)+(o[n]?s:0);return w<0?0:w>y?y:w}function Z(e){const t=document.querySelectorAll(`.map-item[data-mission="${e}"]`),a=document.querySelectorAll(`.enemy-item[data-mission="${e}"]`);return 1>=t.length&&0===a.length}function _(e,t,a){return"strength"===a?"yes"===e.dataset.isstrong&&"strength"===t.dataset.ability||void 0===e.dataset.isstrong||"no"===e.dataset.isstrong:a===t.dataset.ability}function K(e){const t=e.dataset?.interacted;t&&""!==t&&(e.style.background=`url(${t}) no-repeat`,e.style.backgroundSize="cover","true"===e.dataset.passable&&e.classList.add("passable"))}function ee(e,t=!0){window.allowHit=!1;const a=document.querySelector(".indicator-icon");if(window.allowIndicate&&e&&a&&!1===a.classList.contains("engage")){const n=e.style.left.replace("px",""),o=e.style.top.replace("px",""),s=e.getBoundingClientRect().width/2-7.5,r=re(e.className);a&&(a.classList.add("engage"),a.style.left=s+parseInt(n)+"px",a.style.top=parseInt(o)-25+"px",!0===t&&(a.dataset.sign="",a.dataset.cutscene=r),!1===t&&(a.dataset.cutscene="",a.dataset.sign=r))}}function te(e){const t=e.getAttribute("data-type"),a=e.getAttribute("data-value"),n=e.id,o=re(e.className),s=document.createElement("span"),r=function(e){return{health:"items",mana:"items",gear:"gear",weapons:"weapons"}[e]}(t),c=document.querySelector('[data-menu="'+r+'"]'),i=document.querySelector(`#explore-points .${t}-amount`);let l=100;if(i&&(l=i.getAttribute("data-amount")),"gear"===t||"health"!==t&&"mana"!==t||!(100>l)){if(s.setAttribute("data-type",t),s.setAttribute("data-id",n),s.setAttribute("data-value",a),s.setAttribute("title",o),s.setAttribute("data-empty","false"),"gear"===t||"weapons"===t){const t=getComputedStyle(e);s.setAttribute("data-width",t.width.replace("px","")),s.setAttribute("data-height",t.height.replace("px","")),s.setAttribute("data-strength",e.dataset.strength);const a=document.createElement("img");a.setAttribute("src",e.dataset.image),a.setAttribute("width","80px"),a.style.objectFit="contain",s.append(a)}if(s.className="storage-item",c){const e=c.querySelector('.storage-item[data-empty="true"]'),r=c.querySelectorAll('.storage-item[data-empty="false"]');let i=!0;e&&(e.remove(),r&&r.forEach((e=>{if(e.getAttribute("title")===o){let t=e.getAttribute("data-count");t=null!==t?parseInt(t)+1:2,e.setAttribute("data-count",t),i=!1}})),!0===i&&(c.prepend(s),s.addEventListener("click",(()=>{M(s)}))),N(n,o,t,a,!1))}}}function ae(e,t=!1,a=!1){const o=document.querySelector("."+e+"-map-cutscene");if(!o||void 0!==o.dataset.video&&"false"!==o.dataset.video){if("true"===o.dataset.video&&!1===o.classList.contains("been-viewed")){const s=o.querySelector("video");window.allowMovement=!1,o.classList.add("engage"),s&&(s.play(),s.addEventListener("ended",(()=>{window.allowMovement=!0,ne(o,t)})))}}else{const r=o.querySelectorAll("p, .wp-block-orbem-paragraph-mp3");if(!1===o.classList.contains("been-viewed")){window.allowMovement=!1,window.allowHit=!1,o.classList.add("engage"),o.dataset.music&&""!==o.dataset.music&&$(o.dataset.music,e);let p=r[0];r[0]&&r[0].classList.contains("wp-block-orbem-paragraph-mp3")&&(p=r[0].querySelector("p"));const g=p.innerText;p.innerText="",u(p,g,0),o.classList.add("been-viewed"),window.allowCutscene=!0,function(e){const t=JSON.parse(e.getAttribute("data-character-position"));t&&0<t.length&&void 0!==t[0]&&(window.allowCutscene=!1,me(document.getElementById("map-character"),t[0].top,t[0].left,!0,e))}(o),o.addEventListener("click",(e=>{!1===o.contains(e.target)&&(r.forEach((e=>{e.classList.remove("engage")})),o.classList.remove("engage"),r[0].classList.add("engage"),clearTimeout(n),clearTimeout(window.nextDialogueTimeout),ne(o))})),c(g),document.addEventListener("keydown",i)}function c(e=""){const a=o.querySelector(".wp-block-orbem-paragraph-mp3.engage");let n=a.querySelector("audio");n=null!=n&&n;const s="."+a.className.replace(" engage","").replace("engage ","").replace("wp-block-orbem-paragraph-mp3 ","")+"-map-item",r=".mc-map-item"!==s?document.querySelector(s):document.querySelector("#map-character");let c=a.dataset.voice;const i=a.className.replace("wp-block-orbem-paragraph-mp3","").replace("engage","").trim(),l=document.querySelector('.cut-character[data-character="'+i+'"]');if(!0===t){if(r&&o){const e=".mc-map-item"!==s?parseInt(r.style.left.replace("px",""))+20:parseInt(r.style.left.replace("px",""))+470,t=".mc-map-item"!==s?parseInt(r.style.top.replace("px",""))+20:parseInt(r.style.top.replace("px",""))+470;o.style.position="absolute",o.style.display="table",o.style.width="300px",o.style.maxHeight="unset",o.style.height="unset",o.style.transform="unset",o.style.left=e-300+"px",o.style.top=t-o.offsetHeight+"px"}}else{const e=document.querySelector(".engage.cut-character");e&&(e.classList.remove("engage"),l.classList.add("engage"))}""!==e&&(ge(e,c,n),l&&l.classList.add("engage"))}function i(e){!0===window.allowCutscene&&("ArrowRight"===e.code||"Space"===e.code)&&r&&o.classList.contains("engage")&&m()}let l=0;function u(e,t,a){clearTimeout(n),a<t.length?(e.innerHTML+=t.charAt(a),a++,n=setTimeout((function(){l++,!1===/^[a-zA-Z]+$/.test(t.charAt(a))&&(l=0),u(e,t,a)}),50)):window.nextDialogueTimeout=setTimeout((()=>{m()}),2e3)}function m(){""!==d&&(d.pause(),d.currentTime=0),clearTimeout(window.nextDialogueTimeout);let e=o.querySelector("p.engage, .wp-block-orbem-paragraph-mp3.engage").nextElementSibling;if(r.forEach((e=>{e.classList.remove("engage")})),e){e.classList.add("engage");let t=e.querySelector("audio");t=null!=t&&t;const a=e.querySelector("p"),n=a.innerText;a.innerText="",u(a,n,0),c(),ge(n,e.dataset.voice,t)}else clearTimeout(n),clearTimeout(window.nextDialogueTimeout),o.classList.remove("engage"),o.removeEventListener("click",i),document.removeEventListener("keydown",i),"yes"!==document.querySelector(".default-map").dataset.iscutscene&&document.querySelector('div[data-character="mc"]').classList.remove("engage"),window.allowMovement=!0,r[0].classList.add("engage"),ne(o,t),o.style.removeProperty("position"),o.style.removeProperty("display"),o.style.removeProperty("width"),o.style.removeProperty("max-height"),o.style.removeProperty("height"),o.style.removeProperty("transform"),o.style.removeProperty("left"),o.style.removeProperty("top")}}}function ne(e,t=!1){window.nextAreaMissionComplete="";const a=re(e.className).replace(" ",""),n=e.dataset.boss,o=document.querySelector(".indicator-icon");o&&o.classList.remove("engage");const s=document.querySelector('[data-character="mc"]');s&&s.classList.remove("engage"),e.dataset.music&&""!==e.dataset.music&&musicNames[v]&&$(musicNames[v],v),""!==d&&(d.pause(),d.currentTime=0);const r=document.querySelector('[data-trigger-cutscene="'+a+'"]');r&&b(r);let c=document.querySelectorAll("[data-removeaftercutscene]");c&&oe(c,a);const i=e.dataset.nextarea,l=e.getAttribute("data-nextarea-position"),u=e.dataset.mapurl,m=document.querySelector(".map-weapon"),p=e.dataset.missioncomplete;p&&(k(p,document.querySelector("."+p+"-mission-item"),p),window.nextAreaMissionComplete=p),i&&j(i,m,u,l),setTimeout((()=>{if(window.allowHit=!0,n&&""!==n){const e=document.querySelector("."+n+"-map-item");e&&D(e)}}),100)}function oe(e,t){e.forEach((e=>{t===e.dataset.removeaftercutscene&&(e.remove(),x(re(e.className)))})),e&&0<e.length&&""!==window.previousCutsceneArea&&(window.previousCutsceneArea="")}function se(){const e={};let t=!1;function a(t,a){const n=document.querySelector("#map-character");if(e[t.which]=!1,window.keyDown=!1,clearInterval(window.buttonShow),!0===[37,38,39,40,87,65,83,68].includes(t.which)||!0===a){window.coordinateTimeout=setTimeout((()=>{const e=document.querySelector("#map-character"),t=e.style.left,a=e.style.top;!1!==window.keyDown||t===window.charCurrentLeft&&a===window.charCurrentTop||(C(t,a),window.charCurrentLeft=t,window.charCurrentTop=a,clearInterval(window.coordinateTimeout))}),1e3);const e=document.querySelector(".map-character-icon.engage");if(e&&""===window.currentCharacterAutoDirection){const t=document.getElementById(e.id.replace("left-punch","left").replace("right-punch","right").replace("up-punch","up").replace("down-punch","down").replace("mc-","mc-static-"));t&&(e.classList.remove("engage"),t.classList.add("engage"),n.dataset.static="true")}}}window.allowMovement=!0,window.keyDown=!1,document.addEventListener("keydown",(function(a){e[a.which]=!0,t=a.which,clearInterval(window.buttonShow),clearTimeout(window.coordinateTimeout)})),document.addEventListener("keyup",(function(e){a(e,!1)})),document.addEventListener("touchend",(function(e){a(e,!0)})),document.querySelector(".top-left").addEventListener("touchstart",(function(t){t.preventDefault(),e[37]=!0,e[38]=!0,clearInterval(window.buttonShow),clearTimeout(window.coordinateTimeout)})),document.querySelector(".top-left").addEventListener("touchend",(function(t){t.preventDefault(),e[37]=!1,e[38]=!1,clearInterval(window.buttonShow),window.coordinateTimeout=setTimeout((()=>{const e=document.querySelector("#map-character");C(e.style.left,e.style.top)}),1e3)})),document.querySelector(".top-middle").addEventListener("touchstart",(function(t){t.preventDefault(),e[38]=!0,clearInterval(window.buttonShow)})),document.querySelector(".top-middle").addEventListener("touchend",(function(t){t.preventDefault(),e[38]=!1,clearInterval(window.buttonShow)})),document.querySelector(".top-right").addEventListener("touchstart",(function(t){t.preventDefault(),e[38]=!0,e[39]=!0,clearInterval(window.buttonShow)})),document.querySelector(".top-right").addEventListener("touchend",(function(t){t.preventDefault(),e[38]=!1,e[39]=!1,clearInterval(window.buttonShow)})),document.querySelector(".middle-left").addEventListener("touchstart",(function(t){t.preventDefault(),e[37]=!0,clearInterval(window.buttonShow)})),document.querySelector(".middle-left").addEventListener("touchend",(function(t){t.preventDefault(),e[37]=!1,clearInterval(window.buttonShow)})),document.querySelector(".middle-right").addEventListener("touchstart",(function(t){t.preventDefault(),e[39]=!0,clearInterval(window.buttonShow)})),document.querySelector(".middle-right").addEventListener("touchend",(function(t){t.preventDefault(),e[39]=!1,clearInterval(window.buttonShow)})),document.querySelector(".bottom-left").addEventListener("touchstart",(function(t){t.preventDefault(),e[37]=!0,e[40]=!0,clearInterval(window.buttonShow)})),document.querySelector(".bottom-left").addEventListener("touchend",(function(t){t.preventDefault(),e[37]=!1,e[40]=!1,clearInterval(window.buttonShow)})),document.querySelector(".bottom-middle").addEventListener("touchstart",(function(t){t.preventDefault(),e[40]=!0,clearInterval(window.buttonShow)})),document.querySelector(".bottom-middle").addEventListener("touchend",(function(t){t.preventDefault(),e[40]=!1,clearInterval(window.buttonShow)})),document.querySelector(".bottom-right").addEventListener("touchstart",(function(t){t.preventDefault(),e[39]=!0,e[40]=!0,clearInterval(window.buttonShow)})),document.querySelector(".bottom-right").addEventListener("touchend",(function(t){t.preventDefault(),e[39]=!1,e[40]=!1,clearInterval(window.buttonShow)})),window.movementInt=setInterval((function(){const a=document.getElementById("map-character"),n=document.querySelector(".map-weapon");let o=a.style.left,s=a.style.top;const r=parseInt(o,10),c=function(e,t){let a=e,n=t;const o=document.querySelector(".map-character-icon.engage").getBoundingClientRect();return ce(document.querySelectorAll('.default-map svg rect, .map-item:not(.materialize-item-trigger):not(.drag-dest):not([data-hazard="true"]):not([data-trigger="true"]):not(.currently-dragging):not(.passable):not([data-genre="explore-sign"]):not([data-foreground="true"]), .enemy-item'),o,a,n,!1)}(parseInt(s,10),r),i=document.querySelector(".dragme");if(window.allowMovement){Object.values(e).includes(!0)&&(window.keyDown=!0);const o=Q(c.top,e[87]?87:38,e[83]?83:40,e,3,t),s=Q(c.left,e[65]?65:37,e[68]?68:39,e,3,t);a.style.top=o+"px",a.style.left=s+"px",n&&!0===window.weaponConnection&&(n.style.top=o+300+"px",n.style.left=s+400+"px"),i&&(window.dragTop&&!1!==window.dragTop&&(i.style.top=window.dragTop.higher?o+450-window.dragTop.offset+"px":o+450+window.dragTop.offset+"px"),window.dragLeft&&!1!==window.dragLeft&&(i.style.left=window.dragLeft.left?s+450-window.dragLeft.offset+"px":s+450+window.dragLeft.offset+"px"))}a.scrollIntoView({block:"nearest"})}),20)}function re(e){if("string"==typeof e)return e.replace("wp-block-group map-item ","").replace("-map-item","").replace("wp-block-group enemy-item ","").replace(" no-point","").replace(" is-layout-flow","").replace(" wp-block-group-is-layout-flow","").replace(" engage","").replace("wp-block-group map-cutscene ","").replace("-map-cutscene","").replace("been-viewed","").replace(" path-onload","").replace(" start-timer","").replace("materialize-item-trigger ","").replace("-materialize-item","").replace("mission-trigger ","").replace(" hit","").replace("-minigame-item","").replace("minigame ","").replace(" pulse-wave-engage","").replace(" barage-wave-engage","").replace(" selected","")}function ce(e,t,a,n,o){const s=n,r=a;let c={top:a,left:n,collide:!1};return e&&!1===window.godMode&&e.forEach((e=>{if(e=e.getBoundingClientRect(),ie(t,e)){c.collide=!0;const a=e.bottom>t.top&&e.top<t.top&&e.bottom<t.top+10,n=e.top<t.bottom&&e.bottom>t.bottom&&e.top>t.bottom-10,i=e.right>t.left&&e.left<t.left,l=e.left<t.right&&e.right>t.right,d=!0===o?5:3;!i||l||a||n||(c.left=s+d,c.collide=!0),!l||i||a||n||(c.left=s-d,c.collide=!0),a&&!n&&(c.top=r+d,c.collide=!0),n&&!a&&(c.top=r-d,c.collide=!0)}})),c}function ie(e,t,a=0){return!(e.right+a<t.left-a||e.left+a>t.right-a||e.bottom-a<t.top+a||e.top+a>t.bottom-a)}function le(e,t,a,n,o){e.classList.add("engage");let s=e.getAttribute("data-type");s=s&&""!==s?s:"point";const r=document.querySelector(`#explore-points .${s}-amount`);let c=100;const i=!0===a?parseInt(n):e.getAttribute("data-value");if(r){if(c=r.dataset.amount,"point"===s){const e=parseInt(c)+parseInt(i);r.setAttribute("data-amount",e);const t=pe(c),a=pe(e);if(window.nextLevelPointAmount=JSON.parse(levelMaps)[a],t!==a){const e=document.querySelector(".current-level");e&&(e.textContent="lvl. "+a,document.querySelector(".next-level-points").textContent=window.nextLevelPointAmount)}const n=document.querySelector(".my-points");n&&(n.textContent=e)}r.classList.add("engage"),setTimeout((function(){r.classList.remove("engage")}),2e3);const a=e.classList.contains("storage-item");!function(){const e=document.getElementById("map-character");e.classList.add("point"),setTimeout((function(){e.classList.add("over"),setTimeout((function(){e.classList.remove("point"),e.classList.remove("over")}),500)}),1e3);const t=document.getElementById("ching");t&&(t.volume=window.sfxVolume,t.play())}(),q(parseInt(c)+parseInt(i),s,t,a,o)}}function de(){const e=document.querySelector(".container"),t=document.querySelector("#map-character");document.addEventListener("keydown",(a=>{16===a.keyCode&&_("",t,"programming")&&e.addEventListener("click",ue)})),document.addEventListener("keyup",(a=>{16===a.keyCode&&_("",t,"programming")&&e.removeEventListener("click",ue)}))}function ue(e){const t=document.querySelector(".container").getBoundingClientRect(),a=e.clientX-t.left-400,n=e.clientY-t.top-300,o=document.getElementById("map-character"),s=document.querySelector(".power-amount"),r=s.querySelector(".gauge"),c=s.getAttribute("data-amount");if(clearInterval(window.rechargeInterval),0<c){!o||"rect"===e.target.tagName||"true"!==e.target.dataset.collectable&&!1!==e.target.classList.contains("map-item")&&"true"!==e.target.dataset.hazard||me(o,n,a,!1,!1);const t=c<0?0:c-25;s.setAttribute("data-amount",t),r.style.width=t+"px"}26>c&&function(e,t){window.rechargeInterval=setInterval((()=>{const a=parseInt(t.getAttribute("data-amount"));100<=a?clearInterval(window.rechargeInterval):(t.setAttribute("data-amount",a+1),e.style.width=a+1+"px")}),1500)}(r,s)}function me(e,t,a,n,o){const s=parseInt(e.style.left.replace("px","")),r=parseInt(e.style.top.replace("px","")),c=s>a,i=r>t,l=c?s-a:a-s,d=i?r-t:t-r;let u=0;e.querySelector("img");const m=document.querySelector(".map-weapon");if(n){clearInterval(window.movementInt),e.classList.add("auto-move");const n=Math.max(d,l),p=setInterval((()=>{if(u<=n){let n="",o="";i?(e.style.top=u<=d?r-u+"px":t+"px",m.style.top=parseInt(e.style.top.replace("px",""))+300+"px",n="up"):(e.style.top=u<=d?r+u+"px":t+"px",m.style.top=parseInt(e.style.top.replace("px",""))+300+"px",n="down"),c?(e.style.left=u<=l?s-u+"px":a+"px",m.style.left=parseInt(e.style.left.replace("px",""))+400+"px",o="left"):(e.style.left=u<=l?s+u+"px":a+"px",m.style.left=parseInt(e.style.left.replace("px",""))+400+"px",o="right"),function(e,t,a,n){let o=""===e?t:e;const s=n.querySelector(".map-character-icon.engage");if(o!==window.currentCharacterAutoDirection){const e=n.querySelector("#mc-"+o);window.currentCharacterAutoDirection=o,n.classList.add(o+"-dir"),s&&s.classList.remove("engage"),e&&e.classList.add("engage"),n.className=""}}(n,o,0,e),e.scrollIntoView()}else{window.allowCutscene=!0;const t=e.querySelector(".map-character-icon.engage");if(t&&!1===t.id.includes("static")){t.classList.remove("engage");const e=document.getElementById(t.id.replace("mc","mc-static"));e&&(e.classList.add("engage"),window.currentCharacterAutoDirection="")}(!1===o||!1===o.classList.contains("engage"))&&(clearInterval(p),se())}u++}),10)}else e.style.left=a+"px",e.style.top=t+"px"}function pe(e){if(levelMaps){const t=JSON.parse(levelMaps);for(const a in t)if(e>t[a]&&e<t[parseInt(a)+1]||e===t[a])return parseInt(a)+1}return 1}async function ge(e,t,a=!1){if(!0===e.includes("**")||""===e||"..."===e)return;const n={input:{ssml:"<speak>"+(e=function(e){return!0===e.includes("Graeme")&&(e=e.replace("Graeme",'<phoneme alphabet="ipa" ph="gem">Graeme</phoneme>')),!0===e.includes(" eh")&&(e=e.replace(" eh",'<phoneme alphabet="ipa" ph="e"> eh</phoneme>')),e}(e))+"</speak>"},voice:{name:t,languageCode:"en-US"},audioConfig:{audioEncoding:"MP3",volumeGainDb:window.talkingVolume}};try{const e=await fetch("https://texttospeech.googleapis.com/v1/text:synthesize?key=AIzaSyAH-bCanQ6GonagayBj-ojshasRn1v2h_Y",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){const t=await e.text();throw new Error(`API Error: ${e.status} - ${t}`)}const t=(await e.json()).audioContent;d=new Audio(`data:audio/mp3;base64,${t}`),!1!==a&&(d=a),d.play()}catch(e){console.error("Error during TTS request:",e.message)}}function ye(e=!0){const t=document.getElementById("start-screen-music");if(t&&e){t.volume=0,t.play();const e=setInterval((()=>{t.volume<.7?t.volume+=.1:clearInterval(e)}),300)}else t&&!1===e&&t.pause()}function we(){setInterval((()=>{if(!0===h){const e=window.theHazardValue,t=P("health");q(parseInt(t)-parseInt(e),"health","hazard")}if(!1!==f){const e=document.getElementById("map-character");!function(e,t,a){let n=parseInt(a.style.left.replace("px","")),o=parseInt(a.style.top.replace("px",""));t&&(n=n+400<parseInt(t.style.left.replace("px"))?n-25:n+25,o=o+300<parseInt(t.style.top.replace("px"))?o-25:o+25,a.style.left=n+"px",a.style.top=o+"px")}(0,f,e)}}),1e3)}function he(e,t){e.classList.add(t),setTimeout((function(){e.classList.remove(t)}),1e3)}})();